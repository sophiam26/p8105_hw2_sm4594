---
title: "Data Science HW#2"
author: "Sophia Miller"
date: "10/1/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Loading tidyverse
```{r tidyverse}
library(tidyverse)
```

# Problem 1
## Read and clean Mr. Trash Wheel sheet

```{r read_trashwheel}
library(readxl)
trashwheel_data = read_excel(
  path = "data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "Mr. Trash Wheel",
  range = "A2:N408",
  col_names = TRUE) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = as.integer(round(sports_balls, 0))
    )
``` 

## Read and clean precipitation data for 2017

```{r precip_2017}
precip_data_2017 = read_excel(
  path = "data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2017 Precipitation",
  col_names = TRUE,
  skip = 1) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2017)
```

## Read and clean precipitation data for 2018

```{r precip_2018}
precip_data_2018 = read_excel(
  path = "data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2018 Precipitation",
  col_names = TRUE,
  skip = 1) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2018)
```

## Combine precipitation datasets and convert month to a character variable

```{r combine_precip}
precip_data = 
  full_join(precip_data_2017, precip_data_2018, by = NULL) %>%
 mutate(
    month = as.numeric(month),
    month = month.name[month]
    )
```

There are `r nrow(precip_data)` observations in the precipitation dataset. Key variables in the precipitation dataset include month, year, and total precipitation. Total precipitation in 2018 was `r sum(precip_data$total)`. There are in `r nrow(trashwheel_data)` observations the trashwheel dataset. Key variables include wight_tons, volume_cubic_yards, and homes_powered. The median number of sports balls in a dumpster in 2017 is 

# Problem 2

## Read and clean pols-month data

```{r pols_month}
pols_month_data = read_csv(file = "./data/pols-month.csv") %>%
janitor::clean_names() %>%
separate(mon, c("year","month","day")) %>%
select(-day) %>%
  mutate(
    month = as.numeric(month),
    month = month.name[month],
    president = prez_dem,
    president = recode(president, '1' = "dem", '0' = "gop"))
```
## Read and clean snp data

```{r snp}
snp_data = read_csv(file = "./data/snp.csv") %>%
janitor::clean_names() %>%
separate(date, c("month","day","year")) %>%
select(year, month, day, close) %>%
mutate(
    month = as.numeric(month),
    month = month.name[month])
```

## Read and clean unemployment data

```{r unemployment}
unemployment_data = read_csv(file = "./data/unemployment.csv") %>%
janitor::clean_names() %>%
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "percent_unemployment") %>%
  mutate(month = recode(month, "jan" = "January"))
```

